<Byteblazar>

	<append xpath="/items">
		
		<item name="bbxfx_itemAmmoFlashThunderGrenade">
			<property name="Tags" value="ammo,shotgun,ammoShells"/>
			<property name="CustomIcon" value="bbxfxflashthundergrenade"/> 
			<property name="CustomIconTint" value="ffffff"/> 
			<property name="DescriptionKey" value="bbxfx_itemAmmoFlashThunderGrenadeDesc"/>
			<property name="DisplayType" value="bbxfx_itemAmmoFlashThunderGrenade"/>
			<property name="HoldType" value="45"/>
			<property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
			<property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
			<property name="Material" value="MresourceScrapPolymers"/>
			<property name="Stacknumber" value="150"/> <!-- STK ammo low -->
			<property name="EconomicValue" value="25"/>
			<property name="TraderStageTemplate" value="ammoTier3"/><!-- ammoShotgunBreachingSlug -->
			<property name="Group" value="Ammo/Weapons,Ammo,Ranged Weapons"/>
			<property name="UnlockedBy" value="perkShotgunMessiahSlugs"/> <!-- BOOK_PERK -->
			<property name="SoundPickup" value="shotgunshells_grab"/>
			<property name="SoundPlace" value="shotgunshells_place"/>
			<property name="Singularity_Sound_start" value="bbxfx_loudBang"/>
			<property name="Singularity_Sound_loop" value="bbxfx_loudBang"/>
			<effect_group tiered="false">
				<requirement name="RoundsInMagazine" operation="GT" value="0"/>
				<requirement name="!HoldingItemBroken"/>
				<triggered_effect trigger="onSelfPrimaryActionStart" target="self" action="AddBuff" buff="bbxfx_buffWeaponFlash"/>
				<!-- <triggered_effect trigger="onSelfPrimaryActionStart" action="PlaySound" sound="bbxfx_loudBang" play_at_self="true"/> -->
				<triggered_effect trigger="onSelfPrimaryActionStart" target="self" action="AddBuff" buff="bbxfx_buffDeafness">
					<requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="10"/>
				</triggered_effect>
			</effect_group>
			<effect_group name="bbxfx_itemAmmoFlashThunderGrenade" tiered="false">
				<passive_effect name="EntityPenetrationCount" operation="base_set" value="1" tags="perkBoomstick"/>
				<passive_effect name="DamageModifier" operation="perc_set" value="0"/>
				<triggered_effect trigger="onSelfAttackedOther" target="other" action="AddBuff" buff="bbxfx_buffFlashbang,bbxfx_buffFlashbangNonPlayer"/>
				<passive_effect name="EntityDamage" operation="base_set" value="0" tags="perkBoomstick"/>
				<passive_effect name="BlockDamage" operation="base_set" value="0" tags="perkBoomstick"/>
				<passive_effect name="RoundRayCount" operation="base_set" value="20" tags="perkBoomstick"/>
				<passive_effect name="MaxRange" operation="base_set" value="10" tags="perkBoomstick"/>
				<passive_effect name="DamageFalloffRange" operation="base_set" value="1" tags="perkBoomstick"/>
				<passive_effect name="SpreadDegreesVertical" operation="base_set" value="60" tags="perkBoomstick"/>
				<passive_effect name="SpreadDegreesHorizontal" operation="base_set" value="60" tags="perkBoomstick"/>
				<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="0" tags="perkBoomstick"/>
				<passive_effect name="SpreadMultiplierCrouching" operation="perc_add" value="0" tags="perkBoomstick"/>
				<passive_effect name="SpreadMultiplierWalking" operation="perc_add" value="0" tags="perkBoomstick"/>
				<passive_effect name="SpreadMultiplierRunning" operation="perc_add" value="0" tags="perkBoomstick"/>
			</effect_group>
		</item>

		<item name="bbxfx_itemAmmoBundleFlashThunderGrenade">
			<property name="Extends" value="ammoBundleShotgunShell"/>
			<property name="CustomIcon" value="bbxfxflashthundergrenade"/>
			<property name="EconomicValue" value="2500"/>
			<property name="TraderStageTemplate" value="ammoTier3"/>
			
			<property class="Action0">
				<property name="Create_item" value="bbxfx_itemAmmoFlashThunderGrenade"/>
			</property>
		</item>

		<item name="bbxfx_itemFlashbang">
			<property name="Extends" value="thrownGrenadeContact" param1="ExplodeOnHit"/>
			<property name="CustomIcon" value="bbxfxflashbang"/> 
			<property name="DescriptionKey" value="bbxfx_itemFlashbangDesc"/>
			<!-- <property name="CustomIconTint" value="10,10,10"/> -->
			<property name="TintColor" value="0,10,20"/>
			<property name="UnlockedBy" value="craftingExplosives"/><!-- perkDemolitionsExpert,thrownGrenadeSchematic, -->
			<property name="DisplayType" value="ammoGrenade"/>
			<property name="Explosion.BlastPower" value="1"/>
			<property name="Explosion.BlockDamage" value="0"/>
			<property name="Explosion.Buff" value="bbxfx_buffFlashbang,bbxfx_buffFlashbangNonPlayer"/>
			<property name="Explosion.EntityDamage" value="0"/>
			<property name="Explosion.ParticleIndex" value="21"/>
			<property name="Explosion.RadiusBlocks" value="1"/>
			<property name="Explosion.RadiusEntities" value="10"/>
			<property name="Singularity_IsNonlethalExplosive" value="true"/>
			<property name="FuseTime" value="1.5"/>
			<property name="StickPercent" value=".3"/>
			<property class="Action1">
				<property name="Class" value="Activate"/>
				<property name="Delay" value="1"/>
				<property name="Sound_start" value="grenade_pullpin"/>
				<requirement name="CVarCompare" cvar="_underwater" operation="LT" value="1"/>
			</property>
			<effect_group tiered="false">
				<display_value name="dExRadius" value="10"/>
				<display_value name="dExBlockDamage" value="0"/>
				<display_value name="dExEntityDamage" value="0"/>
				<display_value name="dFuseTime" value="1.5"/>
			</effect_group>
		</item>
	</append>
	
	<csv xpath="//property[@name='Magazine_items' and (contains(@value,'ammoShotgunShell'))]/@value" op="Add">bbxfx_itemAmmoFlashThunderGrenade</csv>
	
	<insertBefore xpath="/items/item[not (@name='ammoProjectileZombieBoulder')]//property[@name='Explosion.BlockDamage']">
		<property name="Explosion.Buff" value="bbxfx_buffGeneralExplosiveBuff"/>
	</insertBefore>
	
	<conditional>
	  <if cond="xpath('//property[@class=&quot;Explosion&quot;]') != null">
		<prepend xpath="//property[@class='Explosion']">
			<property name="Buff" value="bbxfx_buffGeneralExplosiveBuff"/>
		</prepend>
	  </if>
	</conditional>
	
</Byteblazar>
